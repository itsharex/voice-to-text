# Политика безопасности

## Поддерживаемые версии

Мы предоставляем обновления безопасности для следующих версий:

| Версия | Поддержка         |
| ------ | ----------------- |
| 0.3.x  | ✅ Поддерживается |
| 0.2.x  | ✅ Поддерживается |
| 0.1.x  | ⚠️ Ограниченная   |
| < 0.1  | ❌ Не поддерживается |

## Сообщить об уязвимости

Если вы обнаружили уязвимость безопасности, пожалуйста:

1. **НЕ создавайте публичный issue** - это может подвергнуть риску других пользователей
2. Отправьте описание уязвимости на: [ваш контактный email]
3. Включите в сообщение:
   - Описание уязвимости
   - Шаги для воспроизведения
   - Потенциальное влияние
   - Предложения по исправлению (если есть)

Мы стремимся ответить на сообщения об уязвимостях в течение 48 часов.

## Управление секретами

### API ключи

Проект использует API ключи для следующих сервисов:
- **Deepgram** - Speech-to-Text API
- **AssemblyAI** - Speech-to-Text API

### Безопасное хранение ключей

**Для разработки:**
- Используйте файл `.env` в корне проекта (уже в `.gitignore`)
- Для тестов используйте `.env.test` в `src-tauri/` (уже в `.gitignore`)
- Пример конфигурации доступен в `.env.test.example`

**Для production:**
- API ключи встраиваются в бинарник через `build.rs`
- Ключи загружаются из переменных окружения во время сборки
- Никогда не коммитьте `.env` файлы с реальными ключами

### Защитные механизмы

1. **Pre-commit hook** - автоматически проверяет staged файлы на наличие секретов перед коммитом
2. **.gitignore** - блокирует случайный коммит `.env` файлов и других чувствительных данных
3. **История очищена** - hardcoded ключи удалены из git истории с помощью BFG Repo-Cleaner

## Что НЕ коммитить

❌ **Никогда не коммитьте:**
- `.env` файлы с реальными ключами
- API токены в коде
- Пароли или credentials
- Private ключи
- Файлы с секретами (`secrets*.txt`, `credentials*.json`)

✅ **Можно коммитить:**
- `.env.example` файлы с примерами
- Документацию по настройке
- Публичные конфигурационные файлы

## Обход защиты

Если pre-commit hook блокирует легитимный коммит (ложное срабатывание), используйте:

```bash
git commit --no-verify
```

⚠️ **Внимание:** Используйте `--no-verify` только если уверены, что не коммитите секреты!

## Ротация ключей

Если API ключи были скомпрометированы:

1. **Немедленно создайте новые ключи:**
   - Deepgram: https://console.deepgram.com/signup
   - AssemblyAI: https://www.assemblyai.com/

2. **Деактивируйте старые ключи** в соответствующих сервисах

3. **Обновите переменные окружения:**
   ```bash
   # Обновите .env файл
   nano .env

   # Обновите .env.test для тестов
   nano src-tauri/.env.test
   ```

4. **Пересоберите приложение:**
   ```bash
   cd src-tauri
   cargo build --release
   ```

## История безопасности

### 2025-11-23: Очистка git истории
- Удалены hardcoded API ключи из всех тестовых файлов
- Очищена git история с помощью BFG Repo-Cleaner
- Добавлен pre-commit hook для предотвращения будущих утечек
- Создана документация по безопасности

## Лучшие практики

### Для разработчиков

1. **Всегда используйте переменные окружения** для чувствительных данных
2. **Проверяйте staged файлы** перед коммитом: `git diff --cached`
3. **Используйте разные ключи** для разработки и production
4. **Ограничивайте права ключей** - используйте минимально необходимые разрешения
5. **Регулярно ротируйте ключи** - особенно если репозиторий был публичным

### Для контрибьюторов

1. **Не добавляйте свои ключи** в pull requests
2. **Используйте `.env.test.example`** как шаблон
3. **Проверьте git diff** перед созданием PR
4. **Сообщайте об уязвимостях** приватно (см. выше)

## Ресурсы

- [OWASP Secret Management Cheat Sheet](https://cheatsheetseries.owasp.org/cheatsheets/Secrets_Management_Cheat_Sheet.html)
- [GitHub - Removing sensitive data](https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/removing-sensitive-data-from-a-repository)
- [BFG Repo-Cleaner](https://rtyley.github.io/bfg-repo-cleaner/)

## Контакт

Для вопросов по безопасности: [ваш контактный email]

---

**Последнее обновление:** 2025-11-23
