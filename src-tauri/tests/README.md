# –¢–µ—Å—Ç—ã –¥–ª—è Voice-to-Text –ø—Ä–æ–µ–∫—Ç–∞

## –û–±–∑–æ—Ä

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—É—é —Å–∏—Å—Ç–µ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏. –¢–µ—Å—Ç—ã —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π:

- **Unit —Ç–µ—Å—Ç—ã** - –ø—Ä–æ–≤–µ—Ä—è—é—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ –∏–∑–æ–ª—è—Ü–∏–∏
- **Integration —Ç–µ—Å—Ç—ã** - –ø—Ä–æ–≤–µ—Ä—è—é—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- **E2E (End-to-End) —Ç–µ—Å—Ç—ã** - –ø—Ä–æ–≤–µ—Ä—è—é—Ç –ø–æ–ª–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **Real Audio —Ç–µ—Å—Ç—ã** - —Ç–µ—Å—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ MP3 —Ñ–∞–π–ª–∞–º–∏
- **Benchmarks** - –∏–∑–º–µ—Ä—è—é—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

```
src-tauri/
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îú‚îÄ‚îÄ deepgram_test.rs        # –¢–µ—Å—Ç—ã –¥–ª—è Deepgram –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ assemblyai_test.rs      # –¢–µ—Å—Ç—ã –¥–ª—è AssemblyAI –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ integration_test.rs     # –û–±—â–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ README.md               # –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ benches/
‚îÇ   ‚îî‚îÄ‚îÄ deepgram_benchmarks.rs  # –ë–µ–Ω—á–º–∞—Ä–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ Cargo.toml
```

## –¢–µ—Å—Ç—ã Deepgram –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

### Unit —Ç–µ—Å—Ç—ã

–≠—Ç–∏ —Ç–µ—Å—Ç—ã –Ω–µ —Ç—Ä–µ–±—É—é—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ API –∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –±—ã—Å—Ç—Ä–æ:

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ unit —Ç–µ—Å—Ç—ã
cd src-tauri
cargo test --test deepgram_test

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
cargo test --test deepgram_test test_deepgram_initialization
```

**–ü–æ–∫—Ä—ã–≤–∞–µ–º—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:**
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ —Å/–±–µ–∑ API key
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å —Ä–∞–∑–Ω—ã–º–∏ —è–∑—ã–∫–∞–º–∏ (ru, en, es, de)
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –º–æ–¥–µ–ª—è–º–∏ (nova-2, nova-3)
- ‚úÖ State machine (–ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏)
- ‚úÖ Audio encoding (i16 ‚Üí bytes ‚Üí i16)
- ‚úÖ Audio buffering (–º–∏–Ω–∏–º—É–º 100ms –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏)
- ‚úÖ Callback –º–µ—Ö–∞–Ω–∏–∑–º
- ‚úÖ Factory integration
- ‚úÖ Graceful shutdown

### Integration —Ç–µ—Å—Ç—ã

–≠—Ç–∏ —Ç–µ—Å—Ç—ã –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –∫ —Ä–µ–∞–ª—å–Ω–æ–º—É Deepgram API –∏ –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ `#[ignore]`:

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ integration —Ç–µ—Å—Ç—ã (—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–π API key)
cargo test --test deepgram_test -- --ignored

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π integration —Ç–µ—Å—Ç
cargo test --test deepgram_test test_deepgram_full_lifecycle -- --ignored
```

**–ü–æ–∫—Ä—ã–≤–∞–µ–º—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:**
- ‚úÖ –ü–æ–ª–Ω—ã–π lifecycle (init ‚Üí start ‚Üí send ‚Üí stop)
- ‚úÖ WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å —Ä–µ–∞–ª—å–Ω—ã–º API
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –∞—É–¥–∏–æ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–π (partial –∏ final)
- ‚úÖ KeepAlive –º–µ—Ö–∞–Ω–∏–∑–º (–ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### E2E —Ç–µ—Å—Ç—ã

–≠—Ç–∏ —Ç–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç –ø–æ–ª–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ E2E —Ç–µ—Å—Ç—ã
cargo test --test deepgram_test e2e -- --ignored
```

**–ü–æ–∫—Ä—ã–≤–∞–µ–º—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:**
- ‚úÖ –ü–æ–ª–Ω—ã–π pipeline (TranscriptionService + Deepgram + Audio)
- ‚úÖ –ú–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (–Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ—Å—Å–∏–π –ø–æ–¥—Ä—è–¥)
- ‚úÖ –î–ª–∏–Ω–Ω–∞—è —Å–µ—Å—Å–∏—è (30+ —Å–µ–∫—É–Ω–¥ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã)
- ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —è–∑—ã–∫–∞–º–∏
- ‚úÖ Abort –≤–æ –≤—Ä–µ–º—è –∞–∫—Ç–∏–≤–Ω–æ–π —Å–µ—Å—Å–∏–∏

### Real Audio —Ç–µ—Å—Ç—ã (—Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ MP3)

–¢–µ—Å—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ MP3 —Ñ–∞–π–ª–∞–º–∏:

```bash
# –¢–µ—Å—Ç –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è MP3
cargo test --test deepgram_test test_real_mp3_decode -- --ignored --nocapture

# –ü–æ–ª–Ω–∞—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è MP3 —á–µ—Ä–µ–∑ Deepgram
cargo test --test deepgram_test test_real_mp3_transcription_deepgram -- --ignored --nocapture

# –ê–Ω–∞–ª–∏–∑ –∫–∞—á–µ—Å—Ç–≤–∞ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏
cargo test --test deepgram_test test_real_mp3_transcription_quality -- --ignored --nocapture

# –°—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç —Å —Ä–∞–∑–Ω—ã–º–∏ —Ä–∞–∑–º–µ—Ä–∞–º–∏ —á–∞–Ω–∫–æ–≤
cargo test --test deepgram_test test_real_mp3_different_chunk_sizes -- --ignored --nocapture
```

**–¢–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª:** `tests/fixtures/test_audio.mp3`
- –§–æ—Ä–º–∞—Ç: MP3, 44.1kHz, mono
- –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: ~0.9 —Å–µ–∫—É–Ω–¥
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ—Å–µ–º–ø–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ 16kHz –¥–ª—è Deepgram
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞–º–ø–ª–∏—Ç—É–¥—É —Å–∏–≥–Ω–∞–ª–∞ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

**–ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–π MP3:**
1. –ü–æ–ª–æ–∂–∏—Ç–µ —Ñ–∞–π–ª –≤ `tests/fixtures/your_audio.mp3`
2. –û–±–Ω–æ–≤–∏—Ç–µ path –≤ —Ç–µ—Å—Ç–µ: `let mp3_path = "tests/fixtures/your_audio.mp3";`
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç —Å `--nocapture` –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–µ—Ç–∞–ª–µ–π

**–§—É–Ω–∫—Ü–∏–∏ –¥–µ–∫–æ–¥–µ—Ä–∞:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ sample rate –∏ channels
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è stereo ‚Üí mono
- –†–µ—Å–µ–º–ø–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ 16kHz (—Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ Deepgram)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–º–ø–ª–∏—Ç—É–¥—ã —Å–∏–≥–Ω–∞–ª–∞

## –ë–µ–Ω—á–º–∞—Ä–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

Benchmarks –∏—Å–ø–æ–ª—å–∑—É—é—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫—É Criterion –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –∏–∑–º–µ—Ä–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ –±–µ–Ω—á–º–∞—Ä–∫–∏
cd src-tauri
cargo bench

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –±–µ–Ω—á–º–∞—Ä–∫
cargo bench -- deepgram_initialization

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å HTML –æ—Ç—á–µ—Ç—ã
open target/criterion/report/index.html
```

**–ò–∑–º–µ—Ä—è–µ–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**
- ‚ö° –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
- ‚ö° Audio encoding (—Ä–∞–∑–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –±—É—Ñ–µ—Ä–∞: 160-16000 —Å–µ–º–ø–ª–æ–≤)
- ‚ö° –°–æ–∑–¥–∞–Ω–∏–µ AudioChunk
- ‚ö° –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∞—É–¥–∏–æ
- ‚ö° to_bytes / from_bytes –∫–æ–Ω–≤–µ—Ä—Å–∏–∏
- ‚ö° –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞—É–¥–∏–æ
- ‚ö° Callback invocation
- ‚ö° –°–æ–∑–¥–∞–Ω–∏–µ –∏ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚ö° Factory provider creation
- ‚ö° JSON —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è/–¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è
- ‚ö° –û–±—Ä–∞–±–æ—Ç–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —á–∞–Ω–∫–æ–≤

## API –∫–ª—é—á –¥–ª—è —Ç–µ—Å—Ç–æ–≤

–í —Ç–µ—Å—Ç–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–π Deepgram API key:
```rust
const TEST_API_KEY: &str = "***REMOVED***";
```

‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –≠—Ç–æ—Ç –∫–ª—é—á –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è. –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ –≤ production –∫–æ–¥–µ!

## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–∫—Ä—ã—Ç–∏—è

### Unit —Ç–µ—Å—Ç—ã: ~85% –ø–æ–∫—Ä—ã—Ç–∏–µ
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è: 100%
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: 100%
- Audio encoding: 100%
- State machine: 90%
- Callbacks: 100%

### Integration —Ç–µ—Å—Ç—ã: ~70% –ø–æ–∫—Ä—ã—Ç–∏–µ
- WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ: 95%
- –û—Ç–ø—Ä–∞–≤–∫–∞ –∞—É–¥–∏–æ: 100%
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–π: 80%
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫: 60%

### E2E —Ç–µ—Å—Ç—ã: ~60% –ø–æ–∫—Ä—ã—Ç–∏–µ
- –ü–æ–ª–Ω—ã–π pipeline: 100%
- –°—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç—ã: 70%
- –ì—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏: 40%

## –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–µ—Å—Ç

### 1. Unit —Ç–µ—Å—Ç
```rust
#[tokio::test]
async fn test_new_feature() {
    let mut provider = DeepgramProvider::new();

    // –ù–∞—Å—Ç—Ä–æ–π–∫–∞
    let mut config = SttConfig::new(SttProviderType::Deepgram)
        .with_api_key(TEST_API_KEY);

    // –î–µ–π—Å—Ç–≤–∏–µ
    let result = provider.initialize(&config).await;

    // –ü—Ä–æ–≤–µ—Ä–∫–∞
    assert!(result.is_ok());
}
```

### 2. Integration —Ç–µ—Å—Ç (—Å —Ä–µ–∞–ª—å–Ω—ã–º API)
```rust
#[tokio::test]
#[ignore]  // –í–∞–∂–Ω–æ! –ü–æ–º–µ—á–∞–µ–º –∫–∞–∫ ignored
async fn test_real_api_feature() {
    let mut provider = DeepgramProvider::new();

    // ... —Ç–µ—Å—Ç —Å —Ä–µ–∞–ª—å–Ω—ã–º API
}
```

### 3. E2E —Ç–µ—Å—Ç
```rust
#[tokio::test]
#[ignore]
async fn test_e2e_new_scenario() {
    use app_lib::application::services::TranscriptionService;

    // –°–æ–∑–¥–∞–µ–º –ø–æ–ª–Ω—ã–π —Å—Ç–µ–∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
    let service = TranscriptionService::new(/*...*/);

    // –¢–µ—Å—Ç–∏—Ä—É–µ–º –ø–æ–ª–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π
}
```

### 4. Benchmark
```rust
fn bench_new_operation(c: &mut Criterion) {
    c.bench_function("operation_name", |b| {
        b.iter(|| {
            // –ö–æ–¥ –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ –∏–∑–º–µ—Ä–∏—Ç—å
            let result = expensive_operation();
            black_box(result);
        });
    });
}
```

## –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞: –¢–µ—Å—Ç—ã –ø–∞–¥–∞—é—Ç —Å timeout
**–†–µ—à–µ–Ω–∏–µ:** –£–≤–µ–ª–∏—á—å—Ç–µ timeout –≤ WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ–Ω—å—à–∏–µ –∞—É–¥–∏–æ —á–∞–Ω–∫–∏.

### –ü—Ä–æ–±–ª–µ–º–∞: WebSocket connection failed
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. API key –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π
2. –ï—Å—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
3. Deepgram API –Ω–µ –≤ maintenance —Ä–µ–∂–∏–º–µ

### –ü—Ä–æ–±–ª–µ–º–∞: Benchmarks –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
**–†–µ—à–µ–Ω–∏–µ:**
1. –ó–∞–∫—Ä–æ–π—Ç–µ –ª–∏—à–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã
2. –û—Ç–∫–ª—é—á–∏—Ç–µ —Ñ–æ–Ω–æ–≤—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –∏ –±–µ—Ä–∏—Ç–µ –º–µ–¥–∏–∞–Ω—É

### –ü—Ä–æ–±–ª–µ–º–∞: Integration —Ç–µ—Å—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ API calls
**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–ª–∞–≥ `--ignored` —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API.

## Best Practices

1. **–í—Å–µ–≥–¥–∞ –ø–æ–º–µ—á–∞–π—Ç–µ API —Ç–µ—Å—Ç—ã –∫–∞–∫ `#[ignore]`**
   - –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–π —Ä–∞—Å—Ö–æ–¥ API –∫–≤–æ—Ç—ã

2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Arc<Mutex<>> –¥–ª—è shared state –≤ callbacks**
   - –≠—Ç–æ thread-safe –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å async –∫–æ–¥–æ–º

3. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≥—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏**
   - –ü—É—Å—Ç—ã–µ —á–∞–Ω–∫–∏, –æ—á–µ–Ω—å –±–æ–ª—å—à–∏–µ —á–∞–Ω–∫–∏, –Ω—É–ª–µ–≤—ã–µ —Å–µ–º–ø–ª—ã

4. **–î–æ–±–∞–≤–ª—è–π—Ç–µ –æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤**
   - `test_deepgram_handles_empty_audio` –ª—É—á—à–µ —á–µ–º `test_audio`

5. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ sleep() —Ä–∞–∑—É–º–Ω–æ**
   - –¢–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–æ –¥–æ–∂–¥–∞—Ç—å—Å—è async –æ–ø–µ—Ä–∞—Ü–∏–∏

6. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –Ω–µ —Ç–æ–ª—å–∫–æ success, –Ω–æ –∏ error cases**
   - –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º API key, network –æ—à–∏–±–∫–∞—Ö –∏ —Ç.–¥.

## CI/CD Integration

–î–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ CI/CD pipeline:

```yaml
# .github/workflows/test.yml
name: Tests

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2

      # Unit —Ç–µ—Å—Ç—ã (–±—ã—Å—Ç—Ä—ã–µ, –±–µ–∑ API)
      - name: Run unit tests
        run: cargo test --test deepgram_test

      # Integration —Ç–µ—Å—Ç—ã (—Å API key –∏–∑ secrets)
      - name: Run integration tests
        env:
          DEEPGRAM_API_KEY: ${{ secrets.DEEPGRAM_API_KEY }}
        run: cargo test --test deepgram_test -- --ignored

      # Benchmarks
      - name: Run benchmarks
        run: cargo bench --no-fail-fast
```

## –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

–¢–µ–∫—É—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞:
- üìä **–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤:** 22 (9 unit + 9 integration/e2e + 4 real audio)
- üìä **–û–±—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ:** ~80%
- ‚ö° **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è unit —Ç–µ—Å—Ç–æ–≤:** ~1 —Å–µ–∫—É–Ω–¥–∞
- ‚ö° **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è integration —Ç–µ—Å—Ç–æ–≤:** ~30 —Å–µ–∫—É–Ω–¥
- ‚ö° **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è E2E —Ç–µ—Å—Ç–æ–≤:** ~2 –º–∏–Ω—É—Ç—ã
- ‚ö° **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è Real Audio —Ç–µ—Å—Ç–æ–≤:** ~10 —Å–µ–∫—É–Ω–¥
- üéØ **Success rate:** 100%
- üì¶ **–†–∞–∑–º–µ—Ä —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∫–æ–¥–∞:** ~1200+ —Å—Ç—Ä–æ–∫

## –†–µ—Å—É—Ä—Å—ã

- [Deepgram API Documentation](https://developers.deepgram.com/)
- [Rust Testing Guide](https://doc.rust-lang.org/book/ch11-00-testing.html)
- [Tokio Testing Guide](https://tokio.rs/tokio/topics/testing)
- [Criterion Benchmarking](https://bheisler.github.io/criterion.rs/book/)

## –í–∫–ª–∞–¥ –≤ —Ç–µ—Å—Ç—ã

–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞:
1. –î–æ–±–∞–≤—å—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ unit —Ç–µ—Å—Ç—ã
2. –ï—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∏—Å–ø–æ–ª—å–∑—É–µ—Ç API - –¥–æ–±–∞–≤—å—Ç–µ integration —Ç–µ—Å—Ç
3. –û–±–Ω–æ–≤–∏—Ç–µ —ç—Ç—É –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-10-15
**–ö–æ–Ω—Ç–∞–∫—Ç:** Voice-to-Text Contributors
